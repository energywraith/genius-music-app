{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport { getSongData, getArtistData, getRandomSongs, getAlbumData } from '../services/lyrics';\n\nconst useDataResource = () => {\n  _s();\n\n  const [data, setData] = useState(null);\n  const [randomSongs, setRandomSongs] = useState(null);\n  const location = useLocation(); // Fetch data according to the type\n\n  const fetchData = async (id, type) => {\n    switch (type) {\n      case 'song':\n        return await getSongData(id);\n\n      case 'album':\n        return await getAlbumData(id);\n\n      case 'artist':\n        return await getArtistData(id);\n\n      default:\n        return null;\n    }\n  }; // On first render fetch 2 random songs to display on home page\n\n\n  useEffect(() => {\n    const handleFetchData = async () => {\n      try {\n        setRandomSongs(await getRandomSongs(2));\n      } catch (error) {}\n    };\n\n    handleFetchData();\n  }, []); // Everytime location changes tries to fetch the data\n\n  useEffect(() => {\n    const handleFetchData = async () => {\n      const [, id, path] = location.pathname.split('/');\n\n      try {\n        setData(await fetchData(path, id));\n      } catch (error) {\n        setData({\n          _type: 'error',\n          content: '404'\n        });\n      }\n    };\n\n    handleFetchData();\n  }, [location]);\n  return [data, randomSongs];\n};\n\n_s(useDataResource, \"mKxtsp+Of8Pq0rJ8gs/SRG3abr4=\", false, function () {\n  return [useLocation];\n});\n\nexport default useDataResource;","map":{"version":3,"sources":["C:/Users/energ/Documents/GitHub/music-app/client/src/hooks/useDataResource.js"],"names":["useState","useEffect","useLocation","getSongData","getArtistData","getRandomSongs","getAlbumData","useDataResource","data","setData","randomSongs","setRandomSongs","location","fetchData","id","type","handleFetchData","error","path","pathname","split","_type","content"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,SAASC,WAAT,EAAsBC,aAAtB,EAAqCC,cAArC,EAAqDC,YAArD,QAAyE,oBAAzE;;AAEA,MAAMC,eAAe,GAAG,MAAM;AAAA;;AAC5B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,IAAD,CAA9C;AAEA,QAAMY,QAAQ,GAAGV,WAAW,EAA5B,CAJ4B,CAM5B;;AACA,QAAMW,SAAS,GAAG,OAAOC,EAAP,EAAWC,IAAX,KAAoB;AACpC,YAAOA,IAAP;AACE,WAAK,MAAL;AACE,eAAO,MAAMZ,WAAW,CAACW,EAAD,CAAxB;;AACF,WAAK,OAAL;AACE,eAAO,MAAMR,YAAY,CAACQ,EAAD,CAAzB;;AACF,WAAK,QAAL;AACE,eAAO,MAAMV,aAAa,CAACU,EAAD,CAA1B;;AACF;AACE,eAAO,IAAP;AARJ;AAUD,GAXD,CAP4B,CAoB5B;;;AACAb,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMe,eAAe,GAAG,YAAY;AAClC,UAAI;AACFL,QAAAA,cAAc,CAAC,MAAMN,cAAc,CAAC,CAAD,CAArB,CAAd;AACD,OAFD,CAEE,OAAOY,KAAP,EAAc,CAAE;AACnB,KAJD;;AAMAD,IAAAA,eAAe;AAChB,GARQ,EAQN,EARM,CAAT,CArB4B,CA+B5B;;AACAf,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMe,eAAe,GAAG,YAAY;AAClC,YAAM,GAAGF,EAAH,EAAOI,IAAP,IAAeN,QAAQ,CAACO,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,CAArB;;AAEA,UAAI;AACFX,QAAAA,OAAO,CAAC,MAAMI,SAAS,CAACK,IAAD,EAAOJ,EAAP,CAAhB,CAAP;AACD,OAFD,CAEE,OAAOG,KAAP,EAAc;AACdR,QAAAA,OAAO,CAAC;AAAEY,UAAAA,KAAK,EAAE,OAAT;AAAkBC,UAAAA,OAAO,EAAE;AAA3B,SAAD,CAAP;AACD;AACF,KARD;;AAUAN,IAAAA,eAAe;AAChB,GAZQ,EAYN,CAACJ,QAAD,CAZM,CAAT;AAcA,SAAO,CACLJ,IADK,EACCE,WADD,CAAP;AAGD,CAjDD;;GAAMH,e;UAIaL,W;;;AA+CnB,eAAeK,eAAf","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useLocation } from 'react-router'\r\nimport { getSongData, getArtistData, getRandomSongs, getAlbumData } from '../services/lyrics'\r\n\r\nconst useDataResource = () => {\r\n  const [data, setData] = useState(null)\r\n  const [randomSongs, setRandomSongs] = useState(null)\r\n  \r\n  const location = useLocation()\r\n\r\n  // Fetch data according to the type\r\n  const fetchData = async (id, type) => {\r\n    switch(type) {\r\n      case 'song':\r\n        return await getSongData(id)\r\n      case 'album':\r\n        return await getAlbumData(id)\r\n      case 'artist':\r\n        return await getArtistData(id)\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  // On first render fetch 2 random songs to display on home page\r\n  useEffect(() => {\r\n    const handleFetchData = async () => {\r\n      try {\r\n        setRandomSongs(await getRandomSongs(2))\r\n      } catch (error) {}\r\n    }\r\n    \r\n    handleFetchData()\r\n  }, [])\r\n  \r\n  // Everytime location changes tries to fetch the data\r\n  useEffect(() => {\r\n    const handleFetchData = async () => {\r\n      const [, id, path] = location.pathname.split('/')\r\n\r\n      try {\r\n        setData(await fetchData(path, id))\r\n      } catch (error) {\r\n        setData({ _type: 'error', content: '404' })\r\n      }\r\n    }\r\n\r\n    handleFetchData()\r\n  }, [location])\r\n\r\n  return [\r\n    data, randomSongs\r\n  ]\r\n}\r\n\r\nexport default useDataResource"]},"metadata":{},"sourceType":"module"}